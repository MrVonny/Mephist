$(document).ready(function(){var e;function l(){4==$("#typeInput").val()?($("#labJournalInput").show(),$("#Name").prop("disabled",!0),$("#Name").val("Лабораторная работа "+$("#Work").val()),$("#add-material-form").prop("action","/EducationalMaterials/AddLabJournal")):($("#labJournalInput").hide(),$("#Name").prop("disabled",!1),$("#Name").val(e),$("#add-material-form").prop("action","/EducationalMaterials/AddMaterial"))}l(),$("#Name").on("input",function(){$("#Name").is(":enabled")&&(e=$("#Name").val())}),$("#typeInput").on("input",l),$("#Work").on("input",l)}),$(document).ready(function(){$.ajax({type:"GET",url:"/Employee/AutocompleteSearch",dataType:"json",error:function(){console.log("Failed to load emplyees")},success:function(e){console.log(e)}}).done(function(e){$(".employee-input").autocomplete({source:e,delay:100,minLength:3})}),$.ajax({type:"GET",url:"/EducationalMaterials/SubjectsAutocompleteSearch",dataType:"json",error:function(){console.log("Failed to load emplyees")},success:function(e){console.log(e)}}).done(function(e){$(".subject-input").autocomplete({source:e,delay:100,minLength:3})})}),$(document).ready(function(){$.uploadPreview({input_field:"#uploads",preview_box:"#uploads-preview",label_field:"#uploads-label"}),$("#uploads-preview").sortable(),$("#uploads-preview").disableSelection(),$("form").submit(function(e){var a;$("#Name").prop("disabled",!1),a=[],$("#uploads-preview").children().each(function(e){var l=$(this).find(".thumb-name").text();null!=l&&a.push(l)}),console.log(a),$("#query").val(a.toString())})}),function(i){i.extend({uploadPreview:function(e){var t=i.extend({input_field:".image-input",preview_box:".image-preview",label_field:".image-label",label_default:"Choose File",label_selected:"Change File",no_label:!1,success_callback:null},e);if(!(window.File&&window.FileList&&window.FileReader))return alert("You need a browser with file reader support, to use this form properly."),!1;void 0!==i(t.input_field)&&null!==i(t.input_field)&&i(t.input_field).change(function(){var a=this.files;if(0<a.length){i(t.preview_box).empty();for(let l=0;l<a.length;l++){var o=a[l],e=new FileReader;e.addEventListener("load",function(e){e=e.target;o.type.match("image")?i('<div class="file-sortable ui-state-default col-6 col-md-4 col-lg-2 m-1" id="sortable-item'+l+'"><img src="'+e.result+'" class="img-thumbnail"/><span class="thumb-name">'+a[l].name+"</span></div>").appendTo(i(t.preview_box)):o.type.match("audio")?i(t.preview_box).html("<audio controls><source src='"+e.result+"' type='"+o.type+"' />Your browser does not support the audio element.</audio>"):alert("This file type is not supported yet.")}),0==t.no_label&&i(t.label_field).html(t.label_selected),e.readAsDataURL(o),t.success_callback&&t.success_callback()}}else 0==t.no_label&&i(t.label_field).html(t.label_default),i(t.preview_box).css("background-image","none"),i(t.preview_box+" audio").remove()})}})}(jQuery),$(document).ready(function(){[].slice.call(document.querySelectorAll('[data-toggle="tooltip"]')).map(function(e){return new bootstrap.Tooltip(e)})});